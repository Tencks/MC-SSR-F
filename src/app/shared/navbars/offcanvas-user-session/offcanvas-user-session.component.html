<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasUserSession" 
        aria-labelledby="offcanvasUserSessionLabel" data-bs-backdrop="false" >

    <div class="offcanvas-header border-bottom">
        <div class="d-flex align-items-center gap-2">

          <!-- USAMOS DATA-BS-DISMISS PARA CERRAR EL OFFCANVAS  
               USAMOS DATA-BS-TOGGLE CUANDO DEBEMOS INTERCAMBIAR ENTRE OFFCANVAS -->

            <button type="button" class="btn btn-link text-dark p-0 me-2"
                    data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasNavbar" 
                    >
                <i class="bi bi-arrow-left fs-4"></i>
            </button>

            <img src="/assets/logo/torii.png" alt="Logo-Torii" width="40" height="40" class="rounded">
            <h5 class="offcanvas-title mb-0" id="offcanvasUserSessionLabel"> Perfil de Usuario</h5>
        </div>
    </div>

 <!-- Modificamos el body para usar d-flex flex-column -->
    <div class="offcanvas-body d-flex flex-column">
        <!-- Contenido principal -->
        <div class="list-group flex-grow-1">
            @if (userData) {
                <a class="list-group-item list-group-item-action d-flex align-items-center gap-2"
                    data-bs-dismiss="offcanvas" data-bs-target="#offcanvasUserSession" 
                    routerLink="/dashbord" routerLinkActive="active">
                    <i class="bi bi-speedometer2"></i>
                    Dashboard
                </a>
            }
        </div>

        <!-- Sección de usuario al final -->
        <div class="mt-auto border-top pt-3">
            <!-- Perfil de usuario -->
            <div class="d-flex align-items-center gap-2 p-3">
                <div class="rounded-circle bg-light d-flex align-items-center justify-content-center" 
                    style="width: 40px; height: 40px">
                    <i class="bi bi-person"></i>
                </div>
                <div class="flex-grow-1">
                    <div class="fw-medium text-dark">{{ userData?.name || 'Nombre' }}</div>
                    <small class="text-muted">{{ userData?.email || 'userexample.com' }}</small>
                </div>
            </div>

            <!-- Botones de acción -->
            <div class="d-flex p-3">
                @if (!userData) {
                    <button class="btn btn-custom flex-grow-1 rounded-15 py-3"
                        data-bs-dismiss="offcanvas" data-bs-target="#offcanvasUserSession" 
                        routerLink="/login" routerLinkActive="active"
                        (click)="scrollToTop()">
                        <i class="bi bi-person-gear me-2"></i> Iniciar Sesión
                    </button>   

                    <button class="btn btn-custom flex-grow-1 rounded-15 py-3 ms-2"
                        data-bs-dismiss="offcanvas" data-bs-target="#offcanvasUserSession" 
                        routerLink="/register" routerLinkActive="active"
                        (click)="scrollToTop()">
                        <i class="bi bi-box-arrow-right me-2"></i> Registrarse
                    </button>
                } @else {
                    <button class="btn btn-custom flex-grow-1 rounded-15 py-3"
                        data-bs-dismiss="offcanvas" data-bs-target="#offcanvasUserSession" 
                        routerLink="/profile" routerLinkActive="active"
                        (click)="scrollToTop()">
                        <i class="bi bi-person-gear me-2"></i> Perfil
                    </button>   

                    <button class="btn btn-custom flex-grow-1 rounded-15 py-3 ms-2 text-danger"
                        (click)="openLogoutModal()">
                        <i class="bi bi-box-arrow-right me-2"></i> Desconectarse
                    </button>
                }
            </div>
        </div>
    </div>
</div>

<!-- Logout Modal -->
<app-logout-modal (onConfirm)="handleLogoutConfirm()"></app-logout-modal>